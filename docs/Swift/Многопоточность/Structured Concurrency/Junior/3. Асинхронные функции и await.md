
---

> **–ò–∑—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —è–∑—ã–∫–∞ Swift.**
*–î–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Å–≤–æ–µ–Ω–∏—è —ç—Ç–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–µ—Ç—å –±–∞–∑–æ–≤–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ —è–∑—ã–∫–∞ Swift. –≠—Ç–æ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –∑–Ω–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö, –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, —Ü–∏–∫–ª–æ–≤, —Ñ—É–Ω–∫—Ü–∏–π, –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–π –∏ –¥—Ä—É–≥–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —è–∑—ã–∫–∞. –ë–µ–∑ —ç—Ç–∏—Ö —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –≤ –¥–∞–Ω–Ω–æ–º –±–ª–æ–∫–µ.*
> 

---
–ó–∞–¥–∞—á–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–∞—É—á–∏–ª–∏—Å—å, –ø–æ–Ω—è–ª–∏ –æ—Å–Ω–æ–≤–Ω—É—é —Ä–∞–∑–Ω–∏—Ü—É –º–µ–∂–¥—É Task –∏ Task.detached. –ù–æ —á—Ç–æ –±—É–¥–µ—Ç –ª–µ–∂–∞—Ç—å –≤–Ω—É—Ç—Ä–∏ —ç—Ç–∏—Ö –∑–∞–¥–∞—á? –ö–∞–∫ —ç—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å –∏ –∫–∞–∫ —Å —ç—Ç–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å?

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

### Async –§—É–Ω–∫—Ü–∏–∏

–û–¥–Ω–æ –∏–∑ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –∑–∞–¥–∞—á - —ç—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.  –§—É–Ω–∫—Ü–∏—è –ø–æ–º–µ—á–µ–Ω–Ω–∞—è –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º async –Ω–µ –≤–µ—Ä–Ω—ë—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å—Ä–∞–∑—É –∂–µ.  –û–Ω–∞  –µ–≥–æ –≤–µ—Ä–Ω—ë—Ç —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è. –ò–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –¥–∞–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –Ω–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ –≤—ã–∑–≤–∞—Ç—å –∏–∑ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞. –¢–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –ª–∏–±–æ –≤ —Ç–∞–∫–∏—Ö –∂–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö, –ª–∏–±–æ –≤ Task.
```swift
func fetchUserFromDatabase() async throws -> User {
    .....
}

async - –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω–∞ –∏–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
throws - –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –≤—ã–∫–∏–Ω—É—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ
```

#### –ü—Ä–∏–º–µ—Ä
```swift
Task {
	do {
		let user = try await fetchUserFromDatabase()
		let userAvatar = try await getAvatar(userId: user.userId)
		/// –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á, —Å–Ω–∞—á–∞–ª–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å,
		/// –∑–∞—Ç–µ–º –Ω–∞—á–Ω—ë—Ç—Å—è –ø–æ–¥–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	} catch {
		/// –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
	}
}
```
### Await

–í –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ –º—ã —É–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ await.  –í—ã —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –¥–æ–≥–∞–¥—ã–≤–∞–µ—Ç–µ—Å—å, —á—Ç–æ await –Ω—É–∂–µ–Ω –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥–æ–∂–¥–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏. –ù–æ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –º–æ–º–µ–Ω—Ç –≤—ã–∑–æ–≤–∞ await?

**await** - —ç—Ç–æ –º–µ—Å—Ç–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ —Ñ—É–Ω–∫—Ü–∏–∏ - **Suspention point**. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –ø–æ—Å–ª–µ await —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –≤–µ—Ä–Ω—ë—Ç –∫–∞–∫–æ–µ-–Ω–∏–±—É–¥—å –∑–Ω–∞—á–µ–Ω–∏–µ. –ß*—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø–æ—Ç–æ–∫–æ–º –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å —Ñ—É–Ω–∫—Ü–∏—è? –ï—Å–ª–∏ –∫–æ–¥ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –∏ –∂–¥—ë—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏, —Ç–æ –≥–¥–µ –æ–Ω –∂–¥—ë—Ç?*

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ,  –∫–æ–≥–¥–∞ –º—ã –ø–∏—à–µ–º Await –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–ª–µ–¥—É—é—â–µ–µ:

1. –°–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ (*continuation*), –≤ –∫–æ—Ç–æ—Ä–æ–µ –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—é—Ç—Å—è –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Å—Å—ã–ª–∫–∏
2. –°–æ–∑–¥–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
3. –í–º–µ—Å—Ç–µ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –∏ –ø–µ—Ä–µ–¥–∞—á–∞ –æ—Å–≤–æ–±–æ–¥–∏–≤—à–µ–≥–æ—Å—è –ø–æ—Ç–æ–∫–∞. –î–∞–ª–µ–µ —É–∂–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Å–∞–º –±—É–¥–µ—Ç —Ä–µ—à–∞—Ç—å –∫–∞–∫—É—é –∑–∞–¥–∞—á—É –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ. *–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å —Ç–∞–∫–∂–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –∫ –Ω–µ–º—É –∑–∞–¥–∞—á.*

–ò–∑ –≤—ã—à–µ –æ–ø–∏—Å–∞–Ω–Ω—ã—Ö –ø—É–Ω–∫—Ç–æ–≤ —Å–ª–µ–¥—É–µ—Ç, —á—Ç–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –º—ã –≤–µ—Ä–Ω—ë–º—Å—è –≤ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–æ ***–ø–æ—Ç–æ–∫ –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –ø–æ—Ç–æ–∫–∞ —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞–ª–æ—Å—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.*** 
```swift
Task {
	/// –ó–¥–µ—Å—å –º—ã –±—ã–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ Thread 5
	let user = try await fetchUserFromDatabase()
	/// –ó–¥–µ—Å—å –º—ã —É–∂–µ –±—É–¥–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ç–æ–∫–µ (–∏–Ω–æ–≥–¥–∞ –º–æ–∂–µ–º –ø–æ–ø–∞—Å—Ç—å –∏ –Ω–∞ —Ç–æ—Ç –∂–µ —Å–∞–º—ã–π)
}
```
### Task.**yield**
–í—ã–∑–æ–≤ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ await –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—é –∞–∫—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏. –ù–æ –∏–Ω–æ–≥–¥–∞ –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ await —Å–ª–µ–¥—É–µ—Ç –æ—á–µ–Ω—å —Ç—è–∂–µ–ª–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—è—Å—å –∏—Å–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ 
```swift
Task {
	let user = try await fetchUserFromDatabase()
	doSomeRealyHardWork() // –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —á—Ç–æ –≤–Ω—É—Ç—Ä–∏ –∑–∞–¥–∞—á–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è —Ç—è–∂–µ–ª—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º
}
```
–î–∞–Ω–Ω—ã–π –∫–µ–π—Å —á–∞—Å—Ç–æ –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ. –õ—É—á—à–∏–º —Ä–µ—à–µ–Ω–∏–µ–º –≤ —Ç–∞–∫–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏ –±—É–¥–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é Task.yield. 

–í—ã–∑–æ–≤ —Å—Ç–∞—Ç–∏—á–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ yield –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –¥—Ä—É–≥–∏–µ –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤–ø–µ—Ä—ë–¥.  –¢–∞–∫–∏–µ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏–º–µ—é—Ç –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –≤ —Å–ª—É—á–∞–µ –æ–≥—Ä–æ–º–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã,  –≤—ã–∑–æ–≤ yield –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ò–Ω–≤–µ—Ä—Å–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤. 

**üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**

**–ï—Å–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤–Ω—É—Ç—Ä–∏ —Å–µ–±—è —Ç—è–∂—ë–ª—É—é —Ä–∞–±–æ—Ç—É, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞–∑–±–∏—Ç—å –µ—ë –Ω–∞ —á–∞—Å—Ç–∏. –ú–µ–∂–¥—É —á–∞—Å—Ç—è–º–∏ –∑–∞–¥–∞—á–∏ –≤—ã–∑—ã–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é yield**
```swift
Task {
	let user = try await fetchUserFromDatabase()
	doFirstPartOfHardWork()
	await Task.yield()
	doSecondPartOfHardWork()
	await Task.yield()
	doFinalPartOfHardWork()
}
```